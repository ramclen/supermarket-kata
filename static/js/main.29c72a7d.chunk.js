(this["webpackJsonpsupermarket-kata"]=this["webpackJsonpsupermarket-kata"]||[]).push([[0],{15:function(e,t,a){e.exports=a(28)},20:function(e,t,a){},21:function(e,t,a){},28:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),o=a(5),r=a.n(o),l=(a(20),a(12)),s=(a(21),a(1)),u=a(6),i=function(e){var t=e.title,a=e.price,n=e.amount,o=void 0===n?0:n,r=e.onAdd,l=e.onSet;return c.a.createElement("div",{className:"product-item row mb-3"},c.a.createElement("div",{className:"col-md-2 col-1 offset-1 offset-md-0 d-flex justify-content-center"},c.a.createElement("button",{onClick:function(){return r(t)},type:"button",className:"add-btn btn btn-info"},"add")),c.a.createElement("div",{className:"col-2 d-flex justify-content-center"},c.a.createElement("input",{type:"number",value:o,onChange:function(e){e.target.value&&l(t,parseFloat(e.target.value))},className:"product-counter w-75 text-center border border-info"})),c.a.createElement("div",{className:"product-title col-lg-6 col-3"},t),c.a.createElement("div",{className:"product-price col-1 text-center"},a))},d=Object(s.b)((function(e){return{products:e.products}}),{addProduct:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return{type:u.ADD_PRODUCT,payload:{product:e,amount:t}}},setProduct:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return{type:u.SET_PRODUCT,payload:{product:e,amount:t}}}})((function(e){var t=e.productsList,a=e.products,n=e.addProduct,o=e.setProduct;return c.a.createElement("div",{className:"row mb-4"},c.a.createElement("div",{className:"col-lg-8 offset-lg-2 col-12"},c.a.createElement("p",{className:"text-info"},"Products"),c.a.createElement("div",{className:"border border-info border-2 rounded pt-3 pb-1"},Object.keys(t).map((function(e){return c.a.createElement(i,{key:e,title:e,price:t[e],amount:a[e],onSet:o,onAdd:n})})))))})),m=a(3),f=a(2),p=a(7),v=a(8),b=function(){function e(t){Object(p.a)(this,e),this.discounts=t}return Object(v.a)(e,[{key:"getTotalSavings",value:function(e){var t=this;return Object.keys(this.discounts).map((function(a){return t.discounts[a](e[a]?e[a]:0)})).reduce((function(e,t){return e+parseFloat(t)}),0)}},{key:"getApplicableDiscounts",value:function(e){var t=this;return Object.keys(this.discounts).map((function(a){return{name:a,total:t.discounts[a](e[a])}})).filter((function(e){return e.total>0})).reduce((function(e,t){return Object(f.a)(Object(f.a)({},e),{},Object(m.a)({},t.name,t.total))}),{})}}]),e}(),g=function(e){return(Math.round(100*e)/100).toFixed(2)},E=function(){function e(t){Object(p.a)(this,e),this.prices=t}return Object(v.a)(e,[{key:"calculateSubTotal",value:function(e){var t=this;return Object.keys(e).map((function(a){return e[a]*parseFloat(t.prices[a])})).reduce((function(e,t){return e+t}),0)}},{key:"calculateTotal",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.calculateSubTotal(e)-t}}]),e}(),h=Object(s.b)((function(e){return{products:e.products}}))((function(e){var t=e.prices,a=e.products,n=new E(t);return c.a.createElement("div",{className:"subtotal-section row mt-1"},c.a.createElement("div",{className:"col-lg-3 col-4 offset-lg-6 offset-1 font-weight-bold"},"Sub-total"),c.a.createElement("div",{id:"subtotal",className:"col-2"},function(){var e=n.calculateSubTotal(a);return g(e)}()))})),O=Object(s.b)((function(e){return{products:e.products}}))((function(e){var t=e.discounts,a=e.products,n=new b(t),o=function(e,t){return c.a.createElement("div",{key:e,className:"row "},c.a.createElement("div",{className:"col-lg-3 col-4 offset-lg-6 offset-1"},e),c.a.createElement("div",{id:"".concat(e.toLowerCase(),"-discount"),className:"col-2"},g(-t)))};return c.a.createElement("div",null,c.a.createElement("div",{className:"row mt-3"},c.a.createElement("div",{className:"col-lg-3 col-4 offset-lg-6 offset-1 font-weight-bold"},"Savings")),function(){var e=n.getApplicableDiscounts(a);return Object.keys(e).map((function(t){return o(t,e[t])}))}(),c.a.createElement("hr",null),c.a.createElement("div",{className:"row mt-2"},c.a.createElement("div",{className:"col-lg-3 col-4 offset-lg-6 offset-1 font-weight-bold"},"Total savings"),c.a.createElement("div",{id:"total-savings",className:"col-2 savings-section"},function(){var e=n.getTotalSavings(a);return g(-e)}())))})),N=Object(s.b)((function(e){return{products:e.products}}),{})((function(e){var t=e.products,a=Object(n.useState)({}),o=Object(l.a)(a,2),r=o[0],s=o[1],u=Object(n.useState)({}),i=Object(l.a)(u,2),m=i[0],f=i[1],p=new b(r),v=new E(m);Object(n.useEffect)((function(){s({Beans:function(e){return.5*Math.floor(e/3)},Coke:function(e){return.4*Math.floor(e/2)}}),f({Beans:"0.50",Coke:"0.70",Orange:"1.99/kg"})}),[]);return c.a.createElement("div",{className:"container-fluid App"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-12"},c.a.createElement("img",{id:"trolley",className:"img-fluid mx-auto d-block",src:"https://cdn.pixabay.com/photo/2020/02/26/07/41/grocery-basket-4880912_960_720.png",alt:"Trolley"}))),c.a.createElement(d,{productsList:m}),c.a.createElement("div",{className:"price-section row"},c.a.createElement("div",{className:"col-lg-8 offset-lg-2 col-12"},c.a.createElement("p",{className:"text-info"},"Total"),c.a.createElement("div",{className:"border border-info border-2 rounded pt-3 pb-2"},c.a.createElement(h,{prices:m,products:t}),c.a.createElement(O,{discounts:r}),c.a.createElement("hr",null),c.a.createElement("div",{className:"row mt-2"},c.a.createElement("div",{className:"col-lg-3 col-4 offset-lg-6 offset-1 font-weight-bold"},"Total to pay"),c.a.createElement("div",{id:"total",className:"col-2 font-weight-bold"},function(){var e=v.calculateTotal(t,parseFloat(p.getTotalSavings(t)));return g(e)}()))))))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var j=a(4),w=a(4).combineReducers,y=a(6),k=y.ADD_PRODUCT,T=y.SET_PRODUCT,D=w({products:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;return a===k?Object(f.a)(Object(f.a)({},e),{},Object(m.a)({},n.product,e[n.product]?e[n.product]+n.amount:n.amount)):a===T?Object(f.a)(Object(f.a)({},e),{},Object(m.a)({},n.product,n.amount)):e}}),S=Object(j.createStore)(D);r.a.render(c.a.createElement(s.a,{store:S},c.a.createElement(N,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},6:function(e,t,a){"use strict";a.r(t),a.d(t,"ADD_PRODUCT",(function(){return n})),a.d(t,"SET_PRODUCT",(function(){return c}));var n="ADD_PRODUCT",c="SET_PRODUCT"}},[[15,1,2]]]);
//# sourceMappingURL=main.29c72a7d.chunk.js.map